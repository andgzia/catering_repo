function jsCallBack(r){mns.CONFIG.trackLoadingTime===!0&&console.time("rrjsCallBack"),mns.fear.richRelevance.handlerrresponse(r,"RR"),mns.CONFIG.trackLoadingTime===!0&&console.timeEnd("rrjsCallBack")}function rrAddManual(r,e){mns.CONFIG.trackLoadingTime===!0&&console.time("rrAddManual"),rrGlobals.rrmanuals[r-1]=e,mns.CONFIG.trackLoadingTime===!0&&console.timeEnd("rrAddManual")}function rrCacheICheck(r){mns.CONFIG.trackLoadingTime===!0&&console.time("rrCacheICheck");var e=[];for(id in r)r.hasOwnProperty(id)&&(e[r[parseInt(id,10)]-1]=!0);rrGlobals.rrCacheICheckArray[rrGlobals.rrCacheICheckArray.length]=e,mns.CONFIG.trackLoadingTime===!0&&console.timeEnd("rrCacheICheck")}function rrApiCall(){try{require([mns.CONFIG.RRJSUrl],function(){window.rrApiResposeHandler()})}catch(r){require([mns.CONFIG.RRJSUrl],function(){window.rrApiResposeHandler()})}}var rrGlobals={rrk:!1,rrNoInvCall:!1,rrNoRR:!1,rrNoInvCheckDebug:!1,rrShowOnFail:!1,rrSetListen:!1,rrEarlyResult:[],rrmanuals:[],rrmissedpub:[],rrItemObjArray:[],rrCacheICheckArray:[]},R3_COMMON,userType,cookie_GuId,rrUserJID,rrUserInfo,userIds,externalUserId,R3_ITEM;window.rrApiResposeHandler=function(){function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var e=16*Math.random()|0,n="x"===r?e:3&e|8;return n.toString(16)})}if(mns.CONFIG.trackLoadingTime===!0&&console.time("rrApiResposeHandler"),!(Modernizr.touch&&mns.CONFIG.rriPadKillSwitch!==!1||"0"!==mns.CONFIG.RRKillLearnSwitch&&("1"!==mns.CONFIG.RRKillLearnSwitch||rrGlobals.rrk&&0!=rrGlobals.rrk||rrGlobals.rrSetListen))){(""==mns.fear.readCookie("GUID")||void 0==mns.fear.readCookie("GUID"))&&(document.cookie="GUID="+r()),R3_COMMON=new r3_common,userType=mns.CONFIG.RRUserType,R3_COMMON.addContext(mns.CONFIG.RRAdditionalParam,!0),R3_COMMON.setBaseUrl(mns.CONFIG.RRBaseUrl),R3_COMMON.setApiKey(mns.CONFIG.RRApiKey),R3_COMMON.setClickthruServer(window.location.protocol+"//"+window.location.host),cookie_GuId=mns.fear.readCookie("GUID"),void 0!==cookie_GuId&&(rrUserJID=cookie_GuId,R3_COMMON.setSessionId(rrUserJID),R3_COMMON.setUserId(rrUserJID),rrUserInfo=mns.fear.readCookie("MS_USER_COOKIE"),void 0!==rrUserInfo&&""!==rrUserInfo&&(userIds=rrUserInfo.split("_"),externalUserId=userIds[1],R3_COMMON.setUserId(externalUserId))),mns.CONFIG.RRForcedListenMode&&R3_COMMON.forceListenMode();for(var e=""!==mns.CONFIG.RRPlacementTypes?mns.CONFIG.RRPlacementTypes.split("|"):[],n=e.length,o=0;n>o;o++)R3_COMMON.addPlacementType(e[o]);"undefined"!=typeof R3_CATEGORY&&(R3_CATEGORY=void 0),"undefined"!=typeof R3_SEARCH&&(R3_SEARCH=void 0),"undefined"!=typeof R3_CART&&(R3_CART=void 0),R3_ITEM=new r3_item,R3_ITEM.setId(mns.CONFIG.RRId),R3_ITEM.setRecommendable(mns.CONFIG.RRRecommendable),R3_COMMON.addCategoryHintId(mns.CONFIG.RRCategoryHintId),0==rrGlobals.rrNoRR&&void 0!==cookie_GuId&&(rr_flush_onload(),r3())}mns.CONFIG.trackLoadingTime===!0&&console.timeEnd("rrApiResposeHandler")},rrGlobals.rrNoInvCheckDebug=!1,rrGlobals.rrNoInvCall="1"===mns.CONFIG.RRInvSwitch?!1:!0,rrGlobals.rrShowOnFail=!1,rrGlobals.rrk=mns.CONFIG.RRKillRecommSwitch,rrGlobals.rrNoRR=!1,rrGlobals.rrSetListen=mns.CONFIG.RRListenMode,(void 0===mns.CONFIG.deferRRcall||mns.CONFIG.rrcalled===!0)&&(1===$(".upholstery").length?$(window).on("scrollstart",rrApiCall):rrApiCall()),mns.CONFIG.rrloaded===!0&&$(window).off("scrollstart",rrApiCall);